<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<head>
	<meta charset="utf-8" />
	<title>RageV.de | Business</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />

	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
	<link href="../assets/plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet" />
	<link href="../assets/plugins/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" />
	<link href="../assets/plugins/font-awesome/5.3/css/all.min.css" rel="stylesheet" />
	<link href="../assets/plugins/animate/animate.min.css" rel="stylesheet" />
	<link href="../assets/css/default/style.min.css" rel="stylesheet" />
	<link href="../assets/css/default/style-responsive.min.css" rel="stylesheet" />
	<link href="../assets/css/default/theme/default.css" rel="stylesheet" id="theme" />
	<script src="../assets/plugins/pace/pace.min.js"></script>
	
	<!-- START: href anpassen | alte css dateiname ändern zb. gs.css >> xx.css -->
	<link rel="stylesheet" href="business.css">
	<!-- START: href anpassen | alte css dateiname ändern zb. gs.css >> xx.css -->
	
	<script src="../vue.js"></script>
</head>
<body>
	<div id="page-loader" class="fade show"><span class="spinner"></span></div>

	<div id="page-container" class="fade page-without-sidebar page-header-fixed">
	
		<!-- START: section anpassen | entweder section oder div -->
		<div id="app">
		<!-- ENDE: section anpassen | entweder section oder div -->
		
		<div id="header" class="header navbar-default">
			<div class="navbar-header">
				<a href="#" class="navbar-brand"><span class="navbar-logo"></span> <b>Rage V</b> Business</a>
			</div>
			<ul class="navbar-nav navbar-right">
				<li class="dropdown navbar-user">
					<a href="#" class="dropdown-toggle" id="close-button" @click="exit">
						<span class="d-none d-md-inline"><b>X</b></span>
					</a>
				</li>
			</ul>
		</div>

		<div id="content" class="content">		
			<div class="panel panel-inverse">
				<div class="panel-heading">
					<div class="panel-heading-btn">
						<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
					</div>
					
					<!-- START: {{ titleText }} anpassen -->
					
					<h4 class="panel-title"><img src="ragev-gs.png"> {{ showTitle() }} </h4>
					
					<!-- ENDE: {{ titleText }} anpassen -->
				</div>
				<div class="panel-body">
				
			<!-- START: Template anpassen -->	
				
				
                    <div class="b2">
                        <div class="b2-gs">
                            <div class="b2-gs-item b2-title">{{ showTitle() }}</div>
                        </div>
                        <div class="b2-gs">
                            <div class="b2-gs-item" v-if="showBalanceBlock">
                                <div class="gs-main gs-dollar-before">{{ showBalance() }}</div>
                                <div class="gs-info">{{ balanceText }}</div>
                            </div>
                            <div class="b2-gs-item">
                                <div class="gs-main gs-dollar-before">{{ showPrice() }}</div>
                                <div class="gs-info">{{ priceText }}</div>
                            </div>
                            <div class="b2-gs-item">
                                <div class="gs-main">{{ showOwner() }}</div>
                                <div class="gs-info">{{ ownerText }}</div>
                            </div>
                            <div class="b2-gs-item ">
                                <div class="gs-main gs-dollar-before">{{ showTax() }}</div>
                                <div class="gs-info">{{ taxText }}</div>
                            </div>
                            <div class="b2-gs-item" v-if="showMarginBlock">
                                <div class="gs-main gs-percent-after">{{ margin }}</div>
                                <div class="gs-info">{{ marginText }}</div>
                            </div>
                        </div>

                        <div class="b2-buttons">
                            <div class="b2-button" v-if="showBuyBtn" @click="changeBuyConfirms">
                                <div class="b2-cb b2-cb_left" v-if="showBuyConfirms">X</div> {{ buyText }}
                                <div class="b2-cb b2-cb_right" v-if="showBuyConfirms" @click="buy">V</div>
                            </div>
                            <div class="b2-button" v-if="showSellBtn" @click="changeSellConfirms">
                                <div class="b2-cb b2-cb_left" v-if="showSellConfirms">X</div>{{ sellText }}
                                <div class="b2-cb b2-cb_right" v-if="showSellConfirms" @click="sell">V</div>
                            </div>
                            <div class="b2-button" v-if="showMarginBtn">
                                <div class="b2-cb b2-cb_left" @click="changeMargin(-10)">- 10</div>
                                <div class="b2-cb b2-cb_left" style="left: 7vh;" @click="changeMargin(-1)">- 1</div>{{ changeMarginText }}
                                <div class="b2-cb b2-cb_right" style="right: 7vh;" @click="changeMargin(1)">+ 1</div>
                                <div class="b2-cb b2-cb_right" @click="changeMargin(10)">+ 10</div>
                            </div>
                            <div class="b2-button" v-if="showBalanceBtn" @click="takeBalanceMoney">{{ takeBalanceMoneyText }}</div>
                        </div>

                        <!-- ENDE: Template anpassen -->

                    </div>
			</div>
		</div>
		
		<!-- START: section anpassen | entweder section oder div -->
		</div>
		<!-- ENDE: section anpassen | entweder section oder div -->
		
	</div>

	<script src="../assets/plugins/jquery/jquery-3.3.1.min.js"></script>
	<script src="../assets/plugins/jquery-ui/jquery-ui.min.js"></script>
	<script src="../assets/plugins/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
	<!--[if lt IE 9]>
		<script src="../assets/crossbrowserjs/html5shiv.js"></script>
		<script src="../assets/crossbrowserjs/respond.min.js"></script>
		<script src="../assets/crossbrowserjs/excanvas.min.js"></script>
	<![endif]-->
	<script src="../assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>
	<script src="../assets/plugins/js-cookie/js.cookie.js"></script>
	<script src="../assets/js/theme/default.min.js"></script>
	<script src="../assets/js/apps.min.js"></script>

	<script>
		$(document).ready(function() {
			App.init();
		});
	</script>
</body>
</html>

<!-- START: app script funktion anpassen -->

<script>
    const app = new Vue({
        el: '#app',
        data: {
            id: 1,
            title: "",
            showBalanceBlock: false,
            balance: 0,
            price: 0,
            owner: null,
            margin: 0,
            marginLowLimit: 0,
            marginHighLimit: 200,
            showMarginBlock: false,
            showBuyBtn: false,
            showSellBtn: false,
            showMarginBtn: false,
            showBalanceBtn: false,

            showBuyConfirms: false,
            showSellConfirms: false,

            balanceText: "balance",
            priceText: "price",
            ownerText: "owner",
            taxText: "tax",
            marginText: "margin",

            forSaleText: "For Sale",

            buyText: "Buy business",
            sellText: "Sell business",
            changeMarginText: "Change Margin",
            takeBalanceMoneyText: "Take all money from balance account",

        },
        methods: {
            loadForSale: function () {
                this.showBuyBtn = true;
            },
            loadForOwner: function () {
                this.showSellBtn = true;
                this.showMarginBtn = true;
                this.showBalanceBtn = true;
                this.showMarginBlock = true;
                this.showBalanceBlock = true;
            },
            prettify: function (num) {
                let n = num.toString();
                const separator = " ";
                return n.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g, "$1" + separator);
            },
            showTitle: function () {
                return `${this.title} №${this.id}`;
            },
            showBalance: function () {
                return this.prettify(this.balance);
            },
            showPrice: function () {
                return this.prettify(this.price);
            },
            showOwner: function () {
                if (!this.owner || this.owner === "null") return this.forSaleText;
                return this.owner;
            },
            showTax: function () {
                return this.prettify(this.price / 50000);
            },
            changeBuyConfirms: function () {
                this.showBuyConfirms = !this.showBuyConfirms;
            },
            changeSellConfirms: function () {
                this.showSellConfirms = !this.showSellConfirms;
            },
            changeMargin: function (value) {
                if (value > 0) {
                    this.addToMargin(value);
                } else if (value < 0) {
                    this.removeFromMargin(value);
                }
            },
            addToMargin: function (value) {
                if (this.margin + value > this.marginHighLimit) {
                    return this.margin = this.marginHighLimit;
                }
                this.margin += value;
            },
            removeFromMargin: function (value) {
                if (this.margin + value < this.marginLowLimit) {
                    return this.margin = this.marginLowLimit;
                }
                this.margin += value;
            },

            buy: function () {
                mp.trigger("cMisc-CallServerEvent", "sBusiness-BuyBusiness");
                this.exit();
            },
            sell: function () {
                mp.trigger("cMisc-CallServerEvent", "sBusiness-SellBusiness");
                this.exit();
            },
            takeBalanceMoney: function () {
                mp.trigger("cMisc-CallServerEvent", "sBusiness-TakeBalanceMoney");
                this.balance = 0;
            },

            saveMargin: function () {
                mp.trigger("cMisc-CallServerEvent", "sBusiness-ChangeMargin", this.margin);
                mp.trigger("", );
            },

            exit: function () {
                this.saveMargin();
                mp.trigger("cCloseCef");
            },
        }
    });
    function load() {
        document.getElementById("logo").classList.remove("logoLoading");
    }

    function loadRusLang() {
        app.balanceText = "баланс";
        app.priceText = "цена";
        app.ownerText = "владелец";
        app.taxText = "налог";
        app.marginText = "комиссия";

        app.forSaleText = "Продается";

        app.buyText = "Купить бизнес";
        app.sellText = "Продать бизнес";
        app.changeMarginText = "Изменить коммиссию";
        app.takeBalanceMoneyText = "Снять деньги с баланса";
    }

    function loadGerLang() {
        app.balanceText = "Balance";
        app.priceText = "Preis";
        app.ownerText = "Besitzer";
        app.taxText = "Steuern";
        app.marginText = "Kommission";
        app.forSaleText = "Zum Verkauf";
        app.buyText = "Geschäft kaufen";
        app.sellText = "Geschäft verkaufen";
        app.changeMarginText = "Kommission ändern";
        app.takeBalanceMoneyText = "Geld vom Steuerkonto abheben";
    }

    function loadBrLang() {
        app.balanceText = "Saldo";
        app.priceText = "Preço";
        app.ownerText = "Dono";
        app.taxText = "Taxas";
        app.marginText = "Margem";
        app.forSaleText = "Para venda";
        app.buyText = "Comprar empresa";
        app.sellText = "Vender empresa";
        app.changeMarginText = "Alterar Margem";
        app.takeBalanceMoneyText = "Pegue todo o dinheiro da conta de saldo";
    }

    function loadZhsLang() {
        app.balanceText = "账目";
        app.priceText = "价格";
        app.ownerText = "老板";
        app.taxText = "税务";
        app.marginText = "margin";
        app.forSaleText = "出售";
        app.buyText = "购买商业";
        app.sellText = "出售商业";
        app.changeMarginText = "修改Margin";
        app.takeBalanceMoneyText = "取出账目账户的全部现金";
    }

    function loadZhtLang() {
        app.balanceText = "賬目";
        app.priceText = "價格";
        app.ownerText = "老板";
        app.taxText = "稅務";
        app.marginText = "margin";
        app.forSaleText = "出售";
        app.buyText = "購買商業";
        app.sellText = "出售商業";
        app.changeMarginText = "修改Margin";
        app.takeBalanceMoneyText = "取出賬目賬戶的全部現金";
    }
</script>

<!-- ENDE: app script funktion anpassen -->